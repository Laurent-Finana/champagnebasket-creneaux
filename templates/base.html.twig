<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}Welcome!
			{% endblock %}
		</title>
		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.1/flowbite.min.css" rel="stylesheet"/>
		<link rel="stylesheet" href="{{ asset('assets/css/trainingSlots.css') }}">
		{% block stylesheets %}
			{{ encore_entry_link_tags('app') }}
		{% endblock %}
		<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js" integrity="sha256-8EcfIJRWyvnu/U0OsfCk05x1JGVmeC2a7sJQHrbWYSA=" crossorigin="anonymous" defer></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.1/flowbite.min.js" defer></script>
		{% block javascripts %}
			{{ encore_entry_script_tags('app') }}
		{% endblock %}
	</head>
	<body class="bg-slate-200">
		{% block nav %}
			<nav class="flex flex-col items-center justify_center lg:flex-row lg:justify-between flex-wrap bg-navbar p-6">
				<div class="flex justify-center items-center flex-shrink-0 text-white mr-6">
					<a href="{{ path('app_main')}}">
						<img src="{{ asset('output-onlinepngtools.png') }}" alt="Logo training-slots" class="mr-2 inline-block">
						<span class="font-semibold text-xl">ResaBasketTys</span>
					</a>
				</div>
				<div class="w-full block grow lg:flex lg:items-center lg:w-auto">
					<div class="pl-4 lg:flex lg:justify-center lg:items-center text-lg text-center lg:grow">
						<a href="{{ path('app_calendar_grande_salle')}}" class="block mt-4  lg:mt-0 text-orange-200 hover:text-white mr-10 {% if (app.request.attributes.get('_route') == 'app_calendar_grande_salle') %} text-white underline{% endif %}">
							Grande salle
						</a>
						<a href="{{ path('app_calendar_petite_salle')}}" class="block mt-4  lg:mt-0 text-orange-200 hover:text-white mr-10 {% if (app.request.attributes.get('_route') == 'app_calendar_petite_salle') %}text-white underline{% endif %}">
							Petite salle
						</a>
						<a href="{{ path('app_calendar_musculation')}}" class="block mt-4 l lg:mt-0 text-orange-200 hover:text-white mr-10 {% if (app.request.attributes.get('_route') == 'app_calendar_musculation') %}text-white underline{% endif %}">
							Musculation
						</a>
						{% if is_granted('ROLE_PLAYER') %}
							<a href="{{ path('app_message_received')}}" class="block mt-4  lg:mt-0 text-orange-200 hover:text-white mr-10 {% if (app.request.attributes.get('_route') == 'app_message_received') %}text-white underline{% endif %}">
								Messagerie
								<div class="hidden">
									{% set notRead = 0 %}
									{% for message in app.user.received %}
										{% if message.isRead != true %}{
											{% set notRead = notRead + 1 %}
											}
										{% endif %}
									{% endfor %}
								</div>
								<span>({{ notRead }})</span>
							</a>
						{% endif %}

						{% if is_granted('ROLE_ADMIN') %}
							<a href="{{ path('admin')}}" class="inline-block mt-4 lg:mt-0 text-sm px-4 py-2 leading-none border rounded-lg text-red-300 border-white hover:border-transparent hover:text-cyan-600 hover:bg-red-300">
								Zone Administrateur
							</a>
						{% endif %}


					</div>
					<div class="text-center">

						{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
							<p class="my-4 inline-block text-white">Bonjour
								<span class="ml-2 mt-4 lg:inline-block lg:mt-0 text-orange-200 text-xl mr-10">
									{{ app.user.firstname }}
									{{ app.user.lastname }}
								</span>
							</p>
						{% endif %}

						{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
							<a href="{{ path('app_logout')}}" class="block w-32 mx-auto lg:inline-block text-sm px-4 py-2 border rounded-lg text-white border-white hover:border-transparent hover:text-cyan-600 hover:bg-orange-200  lg:mt-0">Déconnexion</a>
						{% else %}
							<a href="{{ path('app_login')}}" class="lg:inline-block text-sm px-4 py-2 border rounded-lg text-white border-white hover:border-transparent hover:text-cyan-600 hover:bg-orange-200 lg:mt-0">Connexion</a>
							<p class="mt-2">
								<a href="{{ path('app_register') }}" class="text-sm">Pas encore inscrit ? Créer un compte</a>
							</p>
						{% endif %}

					</div>
				</div>
			</nav>

		{% endblock %}
		<div class="flex flex-col mb-0 md:flex md:flex-row">
			<div class="order-last flex flex-col items-center bg-gray-100 md:order-first">
				{% if is_granted('ROLE_COACH') %}

					<a href="{{ path('app_slot_new')}}" class="text-sm text-center m-4 p-2 border rounded-lg bg-green-500 text-black border-white hover:border-transparent hover:text-cyan-600 hover:bg-orange-200">Nouveau créneau</a>
					<a href="{{ path('app_slot_index')}}" class="text-sm text-center mx-4 p-2 border rounded-lg bg-amber-200 text-black border-white hover:border-transparent hover:text-cyan-600 hover:bg-orange-200">Modifier un créneau</a>
					<a href="{{ path('app_slot_index')}}" class="text-sm text-center m-4 p-2 border rounded-lg bg-sky-300 text-black border-white hover:border-transparent hover:text-cyan-600 hover:bg-orange-200">Liste des créneaux</a>

				{% elseif is_granted('ROLE_PLAYER') %}
					<a href="{{ path('app_message_send')}}" class="text-sm text-center m-4 px-2 py-2 border rounded-lg bg-green-500 text-black border-white hover:border-transparent hover:text-cyan-600 hover:bg-orange-200">Demander un créneau</a>
				{% endif %}
			</div>


			<div class="container mx-auto mb-4"> {% block body %}{% endblock %}
				</div>

			</div>
		</body>
	</html>
